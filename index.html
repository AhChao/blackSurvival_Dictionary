<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <!--<meta name="viewport" content="width=device-width, initial-scale=1.0">-->
    <meta name="viewport" content="width=device-width, initial-scale=0.86, maximum-scale=3.0, minimum-scale=0.86">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-126290546-1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-126290546-1');
    </script>
    <title>Black survival</title>

    <!-- Bootstrap CSS CDN -->
    <link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="css/style.css">
    <link rel="stylesheet" type="text/css" href="css/csshake.min.css">
    <link rel="icon" href="./img/icon.png">
    <style type="text/css">
    h1 {
        font-family: 'cwTeXFangSong';
    }
    </style>
</head>

<body>

    <div class="wrapper" style="overflow: hidden;">
        <!-- Sidebar Holder -->
        <nav id="sidebar">
            <div class="sidebar-header">
                <h3 id="textGameName">黑色倖存</h3>
                <h3>Black Survival</h3>
                <h6>Game Version 5.6.00 </h6>
                <h6>Webpage Version 5.6.00.2 </h6>
            </div>

            <ul class="list-unstyled components">
                <img id="profilePicture" align="middle" src="./img/icon.png"/>
                <p id="textSelectType">選擇類別</p>
                <li class="active">
                    <a href="#weaponSubmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle" id="weaponBtn">武器</a>
                    <ul class="collapse list-unstyled" id="weaponSubmenu">
                        <li><a id="bladeBtn" href="javascript:selectType('blade')">斬擊</a></li>
                        <li><a id="stabBtn" href="javascript:selectType('stab')">穿刺</a></li>
                        <li><a id="bluntBtn" href="javascript:selectType('blunt')">鈍器</a></li>
                        <li><a id="thrownBtn" href="javascript:selectType('thrown')">投擲</a></li>
                        <li><a id="gunBtn" href="javascript:selectType('gun')">槍</a></li>
                        <li><a id="bowBtn" href="javascript:selectType('bow')">弓</a></li>
                        <li><a id="handBtn" href="javascript:selectType('hand')">拳法</a></li>
                        <li><a id="trapBtn" href="javascript:selectType('trap')">陷阱</a></li>
                    </ul>
                </li>
                <li class="active">
                    <a href="#armorSubmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle" id="armorBtn">護甲</a>
                    <ul class="collapse list-unstyled" id="armorSubmenu">
                        <li><a id="headBtn" href="javascript:selectType('head')">頭部</a></li>
                        <li><a id="clothesBtn" href="javascript:selectType('clothes')">衣服</a></li>
                        <li><a id="armBtn" href="javascript:selectType('arm')">手臂</a></li>
                        <li><a id="legBtn" href="javascript:selectType('leg')">腿部</a></li>
                        <li><a id="accessoryBtn" href="javascript:selectType('accessory')">飾品</a></li>
                    </ul>
                </li>
                <li class="active">
                    <a href="#foodSubmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle" id="foodBtn">食物</a>
                    <ul class="collapse list-unstyled" id="foodSubmenu">
                        <li><a id="healthBtn" href="javascript:selectType('health')">生命值</a></li>
                        <li><a id="staminaBtn" href="javascript:selectType('stamina')">耐力</a></li>
                    </ul>
                </li>
                <li class="active">
                    <a href="#normalSubmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle" id="normalBtn">正常</a>
                    <ul class="collapse list-unstyled" id="normalSubmenu">
                        <li><a id="enhanceBtn" href="javascript:selectType('enhance')">強化</a></li>
                        <li><a id="specialBtn" href="javascript:selectType('special')">特殊</a></li>
                        <li><a id="ingredientsBtn" href="javascript:selectType('ingredients')">材料</a></li><!--消耗品也放這裡-->
                    </ul>
                </li>
                
            </ul>

            <!--<div align="center">
                <img src="./img/ctIcon.png" width="25%" onclick="languageSwitch('ct')"/>
                <img src="./img/jpIcon.png" width="25%" onclick="languageSwitch('jp')"/>
                <img src="./img/usIcon.png" width="25%" onclick="languageSwitch('us')"/>
            </div>-->

            <div align="center">
                <h2>Language</h2>
                <select id="languageSwitchSelect" onchange="languageSwitch(this.value)">Language
                  <option value="ct" selected="selected">Traditional Chinese</option>
                  <option value="jp" >Nihongo</option>
                  <option value="us">English</option>
                </select>                
            </div>

            <ul class="list-unstyled CTAs">
                <li>
                    <a href="javascript:popUpModal('informModal')" class="download" id="howToUseBtn">使用說明</a>
                </li>
                <li>
                    <a href="http://store.steampowered.com/app/690510/Black_Survival/ " class="download">Black Survival (Steam)</a>
                </li>
                <li>
                    <a href="https://blacksurvival.gamerch.com/" class="article">Black Survival Wiki(JP)</a>
                </li>                
            </ul>
        </nav>

        <!-- NavBar -->
        <div id="content">
            <nav class="navbar navbar-expand-lg navbar-light bg-light">
                <div class="container-fluid">

                    <button type="button" id="sidebarCollapse" class="navbar-btn">
                        <span></span>
                        <span></span>
                        <span></span>
                    </button>
                    <button class="btn btn-dark d-inline-block d-lg-none ml-auto" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                        <i class="fas fa-align-justify"></i>
                    </button>

                    <div class="collapse navbar-collapse" id="navbarSupportedContent">
                        <ul class="nav navbar-nav ml-auto">
                            <li class="nav-item active">
                                <a id="nav1" class="nav-link" href="javascript:stepSwitch(1)">裝備規劃</a>
                            </li>
                            <li class="nav-item">
                                <a id="nav2" class="nav-link" href="javascript:stepSwitch(2)">合成顯示</a>
                            </li>
                            <li class="nav-item">
                                <a id="nav3" class="nav-link" href="javascript:stepSwitch(3)">材料統計</a>
                            </li>
                            <li class="nav-item">
                                <a id="nav4" class="nav-link" href="javascript:stepSwitch(4)">地圖索引</a>
                            </li>
                            <li class="nav-item">
                                <a id="nav5" class="nav-link" href="javascript:stepSwitch(5)">套路編輯</a>
                            </li>
                        </ul>
                    </div>
                </div>
            </nav>

            <!--頁面內容-->
            <div id="selectedItemDiv">
                <h2 class="unselectable" id="wishList">裝備規劃</h2>
                <svg width="1550" height="200" id="selectedItemSVG">
                    <rect width="1550" height="200" fill="none" stroke="black" stroke-width="5"></rect>
                    <path d="M 25 100 L 50 125 L 50 75 Z" onclick="selectedPageSwitch(-1)"></path>
                    <path d="M 1525 100 L 1500 125 L 1500 75 Z" onclick="selectedPageSwitch(1)"></path>
                </svg>
            </div>

            <div id="itemListDiv">
                <h2 class="unselectable" id="typeText">點擊左方清單選擇類別</h2>
                <svg width="1550" height="450" id="showItemFieldSVG">
                    <rect width="1550" height="450" fill="none" stroke="black" stroke-width="5"></rect>
                    <path d="M 25 225 L 50 250 L 50 200 Z" onclick="pageSwitch(-1)"></path>
                    <path d="M 1525 225 L 1500 250 L 1500 200 Z" onclick="pageSwitch(1)"></path>
                    <text class="unselectable" id="pageText" x="50%" y="90%" style="font-size:24px;">Page</text>
                </svg>
            </div>

            <div id="itemRecipeDiv">
                <h2 class="unselectable" id="textRecipeLine">合成列</h2>
                <svg width="1500" height="180" id="itemRecipeSVG">
                    <rect width="1500" height="180" fill="none" stroke="black" stroke-width="5"></rect>
                </svg>
            </div>

            <div id="totalNeedDiv">
                <h2 class="unselectable" id="textTotalMat">總共所需材料如下</h2>
                <svg width="1600" height="200" id="totalNeedSVG">
                    <rect id="totalNeedSVGBG" width="1600" height="200" fill="none" stroke="black" stroke-width="5"></rect>
                </svg>
            </div>

            <div id="mapDiv">
                <h2 class="unselectable" id="textMapShow">掉落地點</h2>
                <svg width="1500" height="350" id="mapSVG">
                    <filter id="ggrayscale">
                        <feColorMatrix type="saturate" values="0"></feColorMatrix>
                    </filter>
                    <image href="./mapImg/map_lumiaIsland.png" width="40%"  filter="url(#ggrayscale)"/>
                    <image id="l1" href="./mapImg/l1.png" x="2.35%" y="5.1%" width="8.7%"/>
                    <image id="l2" href="./mapImg/l2.png" x="10%" y="0%" width="7%"/>
                    <image id="l3" href="./mapImg/l3.png" x="16.5%" y="0%" width="7%"/>
                    <image id="l4" href="./mapImg/l4.png" x="23.2%" y="11%" width="10%"/>
                    <image id="l5" href="./mapImg/l5.png" x="32.5%" y="28.5%" width="7%"/>
                    <image id="l6" href="./mapImg/l6.png" x="2%" y="27.5%" width="7%"/>
                    <image id="l7" href="./mapImg/l7.png" x="7%" y="17%" width="6%"/>
                    <image id="l8" href="./mapImg/l8.png" x="12.75%" y="17%" width="5.5%"/>
                    <image id="l9" href="./mapImg/l9.png" x="18%" y="21%" width="8%"/>
                    <image id="l10" href="./mapImg/l10.png" x="28%" y="40%" width="8.5%"/>
                    <image id="l11" href="./mapImg/l11.png" x="7.5%" y="35%" width="6.5%"/>
                    <image id="l12" href="./mapImg/l12.png" x="13.25%" y="44.5%" width="5.75%"/>
                    <image id="l13" href="./mapImg/l13.png" x="16.75%" y="55%" width="7.5%"/>
                    <image id="l14" href="./mapImg/l14.png" x="22.25%" y="42%" width="7%"/>
                    <image id="l15" href="./mapImg/l15.png" x="27.75%" y="53%" width="6.25%"/>
                    <image id="l16" href="./mapImg/l16.png" x="33%" y="57%" width="7%"/>
                    <image id="l17" href="./mapImg/l17.png" x="0%" y="50%" width="7.5%"/>
                    <image id="l18" href="./mapImg/l18.png" x="2.5%" y="55%" width="7%"/>
                    <image id="l19" href="./mapImg/l19.png" x="8.15%" y="63%" width="6%"/>
                    <image id="l20" href="./mapImg/l20.png" x="14%" y="73.5%" width="9.5%"/>
                    <image id="l21" href="./mapImg/l21.png" x="23.7%" y="64%" width="6.15%"/>
                    <image id="l22" href="./mapImg/l22.png" x="16.75%" y="35%" width="5.5%"/>
                </svg>
            </div>

            <div id="reverseListDiv">
                <h2 class="unselectable" id="textEachLoc">各地點應撿材料</h2>
                <svg id="reverseListSVG" width="1550" height="200">
                </svg>
            </div>

            <div id="mapRequestDiv">
                <button id="charBtn" style="border-radius: 5px; font-size: 24px;" onclick="showCharModal()">選擇角色</button>
                <button id="saveBtn" style="border-radius: 5px; font-size: 24px;" onclick="saveRoute()">保存圖片</button>
                <!--<input id="goalLineIn" type="checkbox" checked="true" onchange="goalTRCheck(this.checked)">列入目標</input>-->
                <input id="useSingleColorCheck" type="checkbox">使用此色填充背景</input>
                <!--<button id="equipBtn" style="border-radius: 5px; font-size: 24px;" onclick="putOnEquipments()">穿上裝備</button>-->
                <!--<select id="routePicSize">路徑圖片大小
                  <option value="0">小</option>
                  <option value="1" selected="selected">中</option>
                  <option value="2">大</option>
                </select>-->
                <input id="useSingleColorBG" type="color"></input>
                <h2 class="unselectable" id="textMap">請點選地圖</h2>
                <svg width="1500" height="350" id="rmapSVG">
                    <filter id="grayscale">
                        <feColorMatrix type="saturate" values="0"/>
                    </filter>
                    <image href="./mapImg/map_lumiaIsland.png" width="40%"  filter="url(#grayscale)"/>
                    <image id="rl1" href="./mapImg/l1.png" onclick="popUpModal('mapSelect',this.id)" x="2.35%" y="5.1%" width="8.7%"/>
                    <image id="rl2" href="./mapImg/l2.png" onclick="popUpModal('mapSelect',this.id)" x="10%" y="0%" width="7%"/>
                    <image id="rl3" href="./mapImg/l3.png" onclick="popUpModal('mapSelect',this.id)" x="16.5%" y="0%" width="7%"/>
                    <image id="rl4" href="./mapImg/l4.png" onclick="popUpModal('mapSelect',this.id)" x="23.2%" y="11%" width="10%"/>
                    <image id="rl5" href="./mapImg/l5.png" onclick="popUpModal('mapSelect',this.id)" x="32.5%" y="28.5%" width="7%"/>
                    <image id="rl6" href="./mapImg/l6.png" onclick="popUpModal('mapSelect',this.id)" x="2%" y="27.5%" width="7%"/>
                    <image id="rl7" href="./mapImg/l7.png" onclick="popUpModal('mapSelect',this.id)" x="7%" y="17%" width="6%"/>
                    <image id="rl8" href="./mapImg/l8.png" onclick="popUpModal('mapSelect',this.id)" x="12.75%" y="17%" width="5.5%"/>
                    <image id="rl9" href="./mapImg/l9.png" onclick="popUpModal('mapSelect',this.id)" x="18%" y="21%" width="8%"/>
                    <image id="rl10" href="./mapImg/l10.png" onclick="popUpModal('mapSelect',this.id)" x="28%" y="40%" width="8.5%"/>
                    <image id="rl11" href="./mapImg/l11.png" onclick="popUpModal('mapSelect',this.id)" x="7.5%" y="35%" width="6.5%"/>
                    <image id="rl12" href="./mapImg/l12.png" onclick="popUpModal('mapSelect',this.id)" x="13.25%" y="44.5%" width="5.75%"/>
                    <image id="rl13" href="./mapImg/l13.png" onclick="popUpModal('mapSelect',this.id)" x="16.75%" y="55%" width="7.5%"/>
                    <image id="rl14" href="./mapImg/l14.png" onclick="popUpModal('mapSelect',this.id)" x="22.25%" y="42%" width="7%"/>
                    <image id="rl15" href="./mapImg/l15.png" onclick="popUpModal('mapSelect',this.id)" x="27.75%" y="53%" width="6.25%"/>
                    <image id="rl16" href="./mapImg/l16.png" onclick="popUpModal('mapSelect',this.id)" x="33%" y="57%" width="7%"/>
                    <image id="rl17" href="./mapImg/l17.png" onclick="popUpModal('mapSelect',this.id)" x="0%" y="50%" width="7.5%"/>
                    <image id="rl18" href="./mapImg/l18.png" onclick="popUpModal('mapSelect',this.id)" x="2.5%" y="55%" width="7%"/>
                    <image id="rl19" href="./mapImg/l19.png" onclick="popUpModal('mapSelect',this.id)" x="8.15%" y="63%" width="6%"/>
                    <image id="rl20" href="./mapImg/l20.png" onclick="popUpModal('mapSelect',this.id)" x="14%" y="73.5%" width="9.5%"/>
                    <image id="rl21" href="./mapImg/l21.png" onclick="popUpModal('mapSelect',this.id)" x="23.7%" y="64%" width="6.15%"/>
                    <image id="rl22" href="./mapImg/l22.png" onclick="popUpModal('mapSelect',this.id)" x="16.75%" y="35%" width="5.5%"/>
                </svg>
            </div>
            <div id="plannerDiv">
                <table id="plannerTable" >
                    <tr><td id="saveTitle" colspan="20" align="center" style="font-size: 60px;stroke: white;visibility: hidden;"></td></tr>
                    <tr>
                        <td id="equipmentCol1">
                            <table style="margin-left: 20px;" >
                                <tr><td>
                                    <img id="equipWeaponImg" style="margin-bottom:40px;" src="./img/equipWeaponB.png" width="120" />
                                    <div id="equipWeaponDiv" class="circular--landscape" style="margin-bottom:30px; display: none;"><img  src="./thingsImg/335.jpg" width="120"/></div>
                                </td></tr>
                                <tr><td>
                                    <img id="equipArmImg" style="margin-bottom:40px;" src="./img/equipArmB.png" width="120"/>
                                    <div id="equipArmDiv" class="circular--landscape" style="margin-bottom:30px; display: none;"></div>
                                </td></tr>
                                <tr><td>
                                    <img id="equipAccessoryImg" style="margin-bottom:40px;" src="./img/equipAccessoryB.png" width="120"/>
                                    <div id="equipAccessoryDiv" class="circular--landscape" style="margin-bottom:30px; display: none;"></div>
                                </td></tr>
                            </table>
                        </td>
                        <td id="tableCharLoc"><img src="./charImg/dare.png"/></td>
                        <td id="equipmentCol2">
                            <table>
                                <tr><td>
                                    <img id="equipHeadImg" style="margin-bottom:40px;" src="./img/equipHeadB.png" width="120"/>
                                    <div id="equipHeadDiv" class="circular--landscape" style="margin-bottom:30px; display: none;"></div>
                                </td></tr>
                                <tr><td>
                                    <img id="equipClothesImg" style="margin-bottom:40px;" src="./img/equipClothesB.png" width="120"/>
                                    <div id="equipClothesDiv" class="circular--landscape" style="margin-bottom:30px; display: none;"></div>
                                </td></tr>
                                <tr><td>
                                    <img id="equipLegImg" style="margin-bottom:40px;" src="./img/equiplegB.png" width="120"/>
                                    <div id="equipLegDiv" class="circular--landscape" style="margin-bottom:30px; display: none;"></div>
                                </td></tr>
                            </table>
                        <td>                            
                            <table id="contentTable">
                                <!--<tr id="goalTR" style="border: 5px solid #880000;"></tr>-->
                                <!--example:<tr><td>地點</td><td>撿取物品</td></tr>-->
                            </table>
                        </td>
                    </tr>
                </table>
            </div>
        </div>
    </div>

    <!-- The Modal -->
    <div id="popupModal" class="modal">
      <!-- Modal content -->
      <div class="modal-content" id="popupModalContent"> 
        <span class="close" align="right">&times;</span>
        <p id="explainText">
            <!--<h2>黑色倖存套路規劃器</h2>
            <h4>
            【1】功能位於右上角切換，依序為裝備規劃、合成顯示、材料統計、地圖索引<br>
            【2】在左邊側頁選擇裝備類別，雙擊欲加入規劃的裝備<br>
            【3】裝備規劃列單擊為切到合成顯示頁，雙擊為移除<br>
            【4】合成顯示頁單擊合成列可以觀看合成配方與出現地點、數量，雙擊為觀看該物品配方<br>
            【5】材料統計頁會列出目前所有位於裝備規劃列所需的材料與數量<br>
            【6】地圖索引頁點選單一地點，可以看到目前規劃中裝備應於該地點撿取的物品與數量<br>
            </h4>-->            
        </p>
        <svg id="modalSVG">
        </svg>
      </div>
    </div>

    <!--<script src="lib/jquery-slim.min.js"></script>-->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="lib/popper.min.js"></script>
    <script src="lib/bootstrap.min.js"></script>
    <script src="lib/d3.v3.min.js"></script>
    <script src="lib/html2canvas.min.js"></script>
    <script src="src/recipe.js"></script>
    <script src="src/lumiaIsland.js"></script>
    <script src="src/language.js"></script>
    <script src="src/planner.js"></script>
    <script src="src/main.js"></script>    

    <script type="text/javascript">
        $(document).ready(function () {
            $('#sidebarCollapse').on('click', function () {
                $('#sidebar').toggleClass('active');
                $(this).toggleClass('active');
            });
        });
    </script>
    <script type="text/javascript">
        window.onkeyup = function(e) {
           var key = e.keyCode ? e.keyCode : e.which;
           if (key == 49) stepSwitch(1);
           else if (key == 50) stepSwitch(2);
           else if (key == 51) stepSwitch(3);
           else if (key == 52) stepSwitch(4);
           else if (key == 53) stepSwitch(5);
        }
    </script>

    <script type="text/javascript">
        var modal = document.getElementById('popupModal');
        var span = document.getElementsByClassName("close")[0];
        // When the user clicks on <span> (x), close the modal
        span.onclick = function() {
            modal.style.display = "none";
        }

        // When the user clicks anywhere outside of the modal, close it
        window.onclick = function(event) {
            if (event.target == modal) {
                modal.style.display = "none";
            }
        }
    </script>
</body>

</html>